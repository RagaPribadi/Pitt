#Adhyaksa Pribadi
#adp54@pitt.edu
.data
font:           .half
                ##########################
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                ##########################
                0xC000, #----X---   0000 0000 1100 0000    
                0xC003, #---XX---   0000 0011 1100 0000  
                0xC00C, #--X-X---   0000 1100 1100 0000    
                0xC000, #----X---   0000 0000 1100 0000    
                0xC000, #----X---   0000 0000 1100 0000    
                0xC000, #----X---   0000 0000 1100 0000    
                0xC000, #----X---   0000 0000 1100 0000    
                0xFC3f, #-XXXXXX-   0011 1111 1111 1100  
                ##########################
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x3000, #-----X--   0000 0000 0011 0000  
                0xC000, #----X---   0000 0000 1100 0000    
                0x0003, #---X----   0000 0011 0000 0000    
                0x000C, #--X-----   0000 1100 0000 0000    
                0x0030, #-X------   0011 0000 0000 0000    
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100    
                ##########################
                0xF03F, #-XXXXX--   0011 1111 1111 0000    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0xF03F, #-XXXXX--   0011 1111 1111 0000    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100    
                ##########################
                0x0C00, #------X-   0000 0000 0000 1100    
                0xCC00, #----X-X-   0000 0000 1100 1100    
                0x0C03, #---X--X-   0000 0011 0000 1100    
                0x0C0C, #--X---X-   0000 1100 0000 1100    
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                ##########################
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100    
                0x0030, #-X------   0011 0000 0000 0000    
                0x0030, #-X------   0011 0000 0000 0000    
                0xF03F, #-XXXXX--   0011 1111 1111 0000    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0xF03F, #-XXXXX--   0011 1111 1111 0000    
                ##########################
                0x0C00, #-----X--   0000 0000 0000 1100    
                0x3000, #----X---   0000 0000 0011 0000    
                0x0003, #---X----   0000 0011 0000 0000    
                0xF00F, #--XXXX--   0000 1111 1111 0000
                0x0C30, #-X----X-   0011 0000 0000 1100        
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                ##########################
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x3000, #-----X--   0000 0000 0011 0000    
                0xC000, #----X---   0000 0000 1100 0000    
                0x0003, #---X----   0000 0011 0000 0000    
                0x000C, #--X-----   0000 1100 0000 0000    
                0x0030, #-X------   0011 0000 0000 0000    
                0x0030, #-X------   0011 0000 0000 0000    
                ##########################
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100  
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                ##########################
                0xF00F, #--XXXX--   0000 1111 1111 0000    
                0x0C30, #-X----X-   0011 0000 0000 1100    
                0x0C30, #-X----X-   0011 0000 0000 1100  
                0xFC0F, #--XXXXX-   0000 1111 1111 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0x0C00, #------X-   0000 0000 0000 1100    
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                ########################## (CARD 10)
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                0xFC3F, #-XXXXXX-   0011 1111 1111 1100
                ########################## (CARD 11)
                0x0000, #--------   0000 0000 0000 0000
                0x3C3C, #-XX--XX-   0011 1100 0011 1100
                0x0000, #--------   0000 0000 0000 0000
                0x0C30, #-X----X-   0011 0000 0000 1100
                0x300C, #--X--X--   0000 1100 0011 0000
                0xC003, #---XX---   0000 0011 1100 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                ########################## (CARD 12)
                0x0000, #--------   0000 0000 0000 0000
                0x3C3C, #-XX--XX-   0011 1100 0011 1100
                0x0000, #--------   0000 0000 0000 0000
                0xC003, #---XX---   0000 0011 1100 0000
                0x300C, #--x--X--   0000 1100 0011 0000
                0x0C30, #-X----X-   0011 0000 0000 1100
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                ########################## (CARD 13)
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                ########################## (CARD 14)
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0xC003, #---XX---   0000 0011 1100 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000, #--------   0000 0000 0000 0000
                0xC003, #---XX---   0000 0011 1100 0000
                0x0000, #--------   0000 0000 0000 0000
                0x0000  #--------   0000 0000 0000 0000


                
cardLocation:	.word
		0xffff00a8,0xffff00aa,0xffff00ac,0xffff00ae,0xffff00b0,0xffff00b2,0xffff00b4,0xffff00b6,
		0xffff0148,0xffff014a,0xffff014c,0xffff014e,0xffff0150,0xffff0152,0xffff0154,0xffff0156,
		0xffff01E8,0xffff01Ea,0xffff01Ec,0xffff01Ee,0xffff01f0,0xffff01f2,0xffff01f4,0xffff01f6,
		0xffff0288,0xffff028a,0xffff028c,0xffff028e,0xffff0290,0xffff0292,0xffff0294,0xffff0296,
		0xffff0328,0xffff032a,0xffff032c,0xffff032e,0xffff0330,0xffff0332,0xffff0334,0xffff0336

clockLocation:	.word
		0xffff000c,	#minute location
		0xffff000e,	#colon
		0xffff0010,	#10 second location
		0xffff0012	#second location

cardValues:	.byte		0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 
				0x02, 0x02, 0x02, 0x02, 0x03, 0x03, 0x03, 0x03, 
				0x04, 0x04, 0x04, 0x04, 0x05, 0x05, 0x05, 0x05, 
				0x06, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07, 
				0x08, 0x08, 0x08, 0x08, 0x09, 0x09, 0x09, 0x09

selected:	.space		8	#save 8 bytes to hold selected cards						

ended: .asciiz "Game Over\n"
matched: .asciiz "Number of Card Pairs Matched\n"
notmatched: .asciiz "Number of card pairs not matched\n"

		
			
.text
##################################################### $s0 is used in drawcardbacks
##################################################### $s1 is used to hold start time
####Initialize
jal initializeClock
jal DrawCardBacks
jal shuffle
li $s7,0 #holds current card position changed by keypress
li $s5,0 # holds x
li $s6,9 # holds y
jal markCard 

times:
li $k0, 0 #seconds start position
li $t9, 0 #tens seconds start position
li $t8, 3 #minutes start position
li $v0,30
syscall
move $k1,$a0 #saved start time
add $t7,$k1,180000
add $k1, $k1, 1000



gameLoop:
li $v0,30
syscall
move $t0, $a0
bgt $t0, $t7, endGame
bgt $t0, $k1, updateClock
jal CheckKeypress
jal markCard 
j gameLoop



###########################################
updateClock:
sw $ra,	0($sp)

updateSeconds:
li $v0,30
syscall
move $k1, $a0
add $k1,$k1,1000
beq $k0, 0, zeroInSeconds
sub $k0,$k0, 1

la $t0, font		########update seconds position
sll $t1, $k0, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 3
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard
#drawcard
j exitUpdateClock
##########################################
##########################################
zeroInSeconds:
addi $k0,$k0, 9

la $t0, font		########update seconds position
sll $t1, $k0, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 3
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard
#drawcard
beq $t9, 0, zeroInMinutes
sub $t9, $t9,1

la $t0, font		########update seconds position
sll $t1, $t9, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 2
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard
#drawcard
j exitUpdateClock
#############################################
zeroInMinutes:
addi $t9, $t9,5

la $t0, font		########update seconds position
sll $t1, $t9, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 2
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard
#drawcard
sub $t8, $t8, 1

la $t0, font		########update seconds position
sll $t1, $t8, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 0
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard
#drawcard
j exitUpdateClock

#################################################
exitUpdateClock:
lw $ra,	0($sp) #restore	return	address
jr $ra
###################################################
initializeClock:
sw $ra,	0($sp)

la $t0, font	###########initialize the minute location with 3
li $t1, 3
sll $t1, $t1, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 0
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard
		
la $t0, font		########draw colon at spot
li $t1, 14
sll $t1, $t1, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 1
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard

la $t0, font		########draw 0 at tens second spot
li $t1, 0
sll $t1, $t1, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 2
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard

la $t0, font		########draw 0 at second spot
li $t1, 0
sll $t1, $t1, 4
add $a0, $t0,$t1
la $t0, clockLocation #base address of location+i*16
li $t1, 3
sll $t1,$t1, 2
add $a1,$t0,$t1
lw $a1, 0($a1)
jal drawCard

lw $ra,	0($sp) #restore	return	address
jr $ra
########################################################################
############# drawcardBack()#######################################################
DrawCardBacks:
sw $ra,	0($sp)

LoopDrawBacks:
bgt $s0,39,exitDrawCardBacks #change $t2 to cycle through locations
la $t0, font
li $t1, 10 	#load i	#a+i*16 picks through which font where (card 10 forback) 
sll $t1, $t1, 4 # i*16
add $a0, $t0, $t1 #a+i*16
la $t0, cardLocation #base address of location+i*16
sll $t2,$s0, 2
add $a1,$t0,$t2
lw $a1, 0($a1)
addi $s0,$s0,1
jal drawCard
j LoopDrawBacks

exitDrawCardBacks:
lw $ra,	0($sp) #restore	return	address
jr $ra
###########################################################################
######################## shuffle function	########################################
shuffle:
sw $ra,	0($sp)
move $t1, $zero
j shuffleLoop

shuffleLoop:
bgt $t4,39,exitShuffle

li $a1, 39	# pick a random number
li $v0, 42
syscall
move $t0, $a0
la $t1, cardValues #base address of location+i*16
add $t2,$t0,$t1
lbu $t3, 0($t2)

la $t0, cardValues #base address of location+i*16
	        	#cycle through all card values
add $t0,$t0,$t4
sb $t3, 0($t0)
add $t4,$t4, 1
j shuffleLoop

exitShuffle:
lw $ra,	0($sp) #restore	return	address
jr $ra
##########################################################################################
################################ mark card function ###########################################
############# drawcard(font, cardlocation)####################################################
drawCard:	#takes in two arguments $a0= starting address of the font location $a1= position 
lhu $t0, 0($a0) #for font
sh $t0, 0($a1)	#drawing font at location
lhu $t0, 2($a0)
sh $t0, 16($a1)
lhu $t0, 4($a0)
sh $t0, 32($a1)
lhu $t0, 6($a0)
sh $t0, 48($a1)
lhu $t0, 8($a0)
sh $t0, 64($a1)
lhu $t0, 10($a0)
sh $t0, 80($a1)
lhu $t0, 12($a0)
sh $t0, 96($a1)
lhu $t0, 14($a0)
sh $t0, 112($a1)
jr $ra
##########################################################################################################
##############################################################################################
markCard:
# save return address
sw $ra,	0($sp)

move $a0,$s5
move $a1,$s6
li $a2,8 #hardcoded
li $a3,1 #hardcoded
jal drawHorizontalLine

move $a0,$s5
move $a1,$s6 
li $a2,10 #hardcoded
li $a3,1 #hardcoded
jal drawVerticalLine

			#draws horizontal line from x,y+10
move $a0,$s5
add  $t0,$s6,9
move $a1,$t0
li $a2,8 #hardcoded
li $a3,1 #hardcoded
jal drawHorizontalLine

add $t0, $s5, 7
move $a0,$t0
move $a1,$s6
li $a2,10 #hardcoded
li $a3,1 #hardcoded
jal drawVerticalLine

lw $ra,	0($sp) #restore	return	address
jr $ra



drawHorizontalLine:
#prologue
addi $sp,$sp, -24 #adjust stack	pointer
sw $s0,	0($sp) #save $s registers
sw $s1,	4($sp)
sw $s2,	8($sp)
sw $s3,	12($sp)
sw $s4,	16($sp)
sw $ra,	20($sp) #save return address

#body
move $s0,$a0 #copy arguments to $s registers
move $s1,$a1
move $s2,$a2
move $s3,$a3


#for(i=0; i < size;i++)
li $s4,	0 #i = 0
loop1: 
slt $t0, $s4, $s2 #i<size
beq $t0, $zero,	end1
add $a0, $s0, $s4 #setup	arguments and call setLED
move $a1, $s1
move $a2, $s3
jal setLED
addi $s4, $s4, 1 #i++
j loop1

end1:
#epilogue
lw $s0,	0($sp) #restore	$s	registers
lw $s1,	4($sp)
lw $s2,	8($sp)
lw $s3,	12($sp)
lw $s4,	16($sp)
lw $ra,	20($sp) #restore	return	address
addi $sp,$sp,24
jr $ra

drawVerticalLine:
#prologue
addi $sp, $sp, -24 #adjust stack pointer
sw $s0, 0($sp) #save $s registers
sw $s1,	4($sp)
sw $s2,	8($sp)
sw $s3,	12($sp)
sw $s4,	16($sp)
sw $ra,	20($sp) #save	return	address


#body
move $s0, $a0 #copy arguments to $s registers
move $s1, $a1
move $s2, $a2
move $s3, $a3

#for (i	= 0;i<size;i++)
li $s4,	0 #i=0
loop2: 
slt $t0, $s4, $s2 #i<size
beq $t0, $zero,	end2
move $a0, $s0	#setup arguments and call setLED
add $a1, $s1, $s4
move $a2, $s3
jal setLED
addi $s4,$s4, 1 #i++
j loop2


end2:
#epilogue
lw $s0,	0($sp) #restore	$s	registers
lw $s1,	4($sp)
lw $s2,	8($sp)
lw $s3,	12($sp)
lw $s4,	16($sp)
lw $ra,	20($sp) #restore	return	address
addi $sp,$sp,24
jr $ra

	# void setLED(int x, int y, int color)
	#   sets the LED at (x,y) to color
	#   color: 0=off, 1=red, 2=yellow, 3=green
	#
	# arguments: $a0 is x, $a1 is y, $a2 is color
	# trashes:   $t0-$t3
	# returns:   none
	#
setLED:
	# byte offset into display = y * 16 bytes + (x / 4)
	sll	$t0,$a1,4      # y * 16 bytes
	srl	$t1,$a0,2      # x / 4
	add	$t0,$t0,$t1    # byte offset into display
	li	$t2,0xffff0008 # base address of LED display
	add	$t0,$t2,$t0    # address of byte with the LED
	# now, compute led position in the byte and the mask for it
	andi	$t1,$a0,0x3    # remainder is led position in byte
	neg	$t1,$t1        # negate position for subtraction
	addi	$t1,$t1,3      # bit positions in reverse order
	sll	$t1,$t1,1      # led is 2 bits
	# compute two masks: one to clear field, one to set new color
	li	$t2,3		
	sllv	$t2,$t2,$t1
	not	$t2,$t2        # bit mask for clearing current color
	sllv	$t1,$a2,$t1    # bit mask for setting color
	# get current LED value, set the new field, store it back to LED
	lbu	$t3,0($t0)     # read current LED value	
	and	$t3,$t3,$t2    # clear the field for the color
	or	$t3,$t3,$t1    # set color field
	sb	$t3,0($t0)     # update display
	jr	$ra
#########################################################################
####################### checkKeypress ###########################
CheckKeypress:
sw $ra,	0($sp)

poll:	la	$v0,0xffff0000		# address for reading key press status
	lw	$t0,0($v0)		# read the key press status
	andi	$t0,$t0,1
	beq	$t0,$0,exitPoll		# no key pressed
	lw	$t0,4($v0)		# read key value
	
ukey:	addi	$v0,$t0,-224		# check for left key press
	bne	$v0,$0,dkey		# wasn't left key, so try right key
	beq	$s6,9,exitPoll
	addi	$s7,$s7,-8
	jal	undrawCard	
	addi	$s6,$s6,-10
	j	poll
dkey:	addi	$v0,$t0,-225		# check for left key press
	bne	$v0,$0,lkey		# wasn't left key, so try right key
	beq	$s6,49,exitPoll
	addi	$s7,$s7,8
	jal	undrawCard	
	addi	$s6,$s6,10
	j	poll
lkey:	addi	$v0,$t0,-226		# check for left key press
	bne	$v0,$0,rkey		# wasn't left key, so try right key
	beq	$s5,0,exitPoll
	addi	$s7,$s7,-1
	jal	undrawCard	
	add	$s5,$s5,-8
	j	poll
rkey:	addi	$v0,$t0,-227		# check for right key press
	bne	$v0,$0,bkey		# wasn't right key, so check for center
	beq	$s5,56,exitPoll
	addi	$s7,$s7,1
	jal	undrawCard	
	add	$s5,$s5,8
	j	poll
bkey:	addi	$v0,$t0,-66		# check for center key press
	bne	$v0,$0,exitPoll		# invalid key, ignore it
	jal	flipcard

exitPoll:
lw $ra,	0($sp) #restore	return	address
jr $ra
################################################################################
################################################

undrawCard:
# save return address
addi $sp,$sp, -8
sw $ra,	4($sp)

move $a0,$s5
move $a1,$s6
li $a2,8 #hardcoded
li $a3,0 #hardcoded
jal undrawHorizontalLine

move $a0,$s5
move $a1,$s6 
li $a2,10 #hardcoded
li $a3,0 #hardcoded
jal undrawVerticalLine

			#draws horizontal line from x,y+10
move $a0,$s5
add  $t0,$s6,9
move $a1,$t0
li $a2,8 #hardcoded
li $a3,0 #hardcoded
jal undrawHorizontalLine

add $t0, $s5, 7
move $a0,$t0
move $a1,$s6
li $a2,10 #hardcoded
li $a3,0 #hardcoded
jal undrawVerticalLine

lw $ra,	4($sp) #restore	return	address
addi $sp,$sp,8
jr $ra
#j gameLoop



undrawHorizontalLine:
#prologue
addi $sp,$sp, -24 #adjust stack	pointer
sw $ra,	20($sp) #save return address

#body
move $s0,$a0 #copy arguments to $s registers
move $s1,$a1
move $s2,$a2
move $s3,$a3


#for(i=0; i < size;i++)
li $s4,	0 #i = 0
unloop1: 
slt $t0, $s4, $s2 #i<size
beq $t0, $zero,	end1
add $a0, $s0, $s4 #setup	arguments and call setLED
move $a1, $s1
move $a2, $s3
jal setLED
addi $s4, $s4, 1 #	i++
j loop1

unend1:
#epilogue
lw $s0,	0($sp) #restore	$s	registers
lw $s1,	4($sp)
lw $s2,	8($sp)
lw $s3,	12($sp)
lw $s4,	16($sp)
lw $ra,	20($sp) #restore	return	address
addi $sp,$sp,24
jr $ra

undrawVerticalLine:
#prologue
addi $sp, $sp, -24 #adjust stack pointer
sw $s0, 0($sp) #save $s registers
sw $s1,	4($sp)
sw $s2,	8($sp)
sw $s3,	12($sp)
sw $s4,	16($sp)
sw $ra,	20($sp) #save	return	address


#body
move $s0, $a0 #copy arguments to $s registers
move $s1, $a1
move $s2, $a2
move $s3, $a3

#for (i	= 0;i<size;i++)
li $s4,	0 #i=0
unloop2: 
slt $t0, $s4, $s2 #i<size
beq $t0, $zero,	end2
move $a0, $s0	#setup arguments and call setLED
add $a1, $s1, $s4
move $a2, $s3
jal setLED
addi $s4,$s4, 1 #i++
j loop2


unend2:
#epilogue
lw $s0,	0($sp) #restore	$s	registers
lw $s1,	4($sp)
lw $s2,	8($sp)
lw $s3,	12($sp)
lw $s4,	16($sp)
lw $ra,	20($sp) #restore	return	address
addi $sp,$sp,24
jr $ra
####################################################################	
############################	FLIPCARD ######################
flipcard:
addi $sp,$sp, -8
sw $ra,	4($sp)

#la $t0, selected
#li $t1,0
#lb $t1, 0($t0)
#bne $t1,0,compare



la $t0, cardLocation #base address of location+i*16
sll $t1,$s7, 2
add $a1,$t0,$t1
lw $a1, 0($a1)


la $t0,cardValues
add $t0,$s7,$t0
lbu $t5, 0($t0) #t2 holds card value


la $t0, font
 	#load i	#a+i*16 picks through which font where (card 10 forback) 
sll $t1, $t5, 4 # i*16
add $a0, $t0, $t1 #a+i*16
jal drawCard
#j exitflip

#compare:
#la $t0,cardValues
#add $t0,$s7,$t0
#lbu $t5, 0($t0) #t5 holds card value


#la $t0, font
 	#load i	#a+i*16 picks through which font where (card 10 forback) 
#sll $t1, $t5, 4 # i*16
#add $a0, $t0, $t1 #a+i*16
#jal drawCard

#la $t0, selected
#lb $t1, 0($t0)
#beq $t1


#j exitflip



#exitflip:
lw $ra,	4($sp) #restore	return	address
addi $sp,$sp,8
jr $ra
###############################################################################

endGame:	#Ends Game with timer
la $a0, ended
li $v0,4
syscall

la $a0, matched
li $v0,4
syscall

la $a0, notmatched
li $v0,4
syscall

li $v0,10
syscall













